import{T as v,C as S}from"./Conversation-BOXOmxDH.js";import{_,o as l,c as d,d as s,t as n,F as I,r as k,n as g,g as N,p as $,f as L,T as m,e as h,b as u}from"./index-Y2JP5UBy.js";const b={props:["test"],computed:{formattedTimeStamp(){const t=new Date(this.test.timestamp),o=t.toLocaleDateString("en-US",{month:"numeric",day:"numeric",year:"numeric"}),e=t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0});return`${o} ${e}`},doctorName(){return this.test.doctorUsername}},methods:{abnormal(t){return+t.resultValue<+t.rangeLow||+t.resultValue>+t.rangeHigh},paramDescription(t){let e=this.$store.state.parameterDescriptions.find(r=>r.name.includes(t));return e==null?"No description available":e.description}}},p=t=>($("data-v-132c1c31"),t=t(),L(),t),w={class:"main"},y={class:"heading"},D=p(()=>s("br",null,null,-1)),V={class:"doctor-name"},C=p(()=>s("br",null,null,-1)),x={class:"timestamp"},U={class:"results"},B=p(()=>s("tr",null,[s("th",null,"Parameter"),s("th",null,"Result"),s("th",null,"Unit"),s("th",null,"Low Normal"),s("th",null,"High Normal")],-1)),H={class:"param-name"},P={class:"param-description"};function F(t,o,e,r,i,c){return l(),d("div",w,[s("div",y,[s("h2",null,n(e.test.name),1),D,s("h4",V,n(c.doctorName),1),C,s("h3",x,n(c.formattedTimeStamp),1)]),s("table",U,[B,(l(!0),d(I,null,k(e.test.results,a=>(l(),d("tr",{key:a.resultID,class:g({abnormal:c.abnormal(a)})},[s("td",H,[N(n(a.parameterName)+" ",1),s("span",P,n(c.paramDescription(a.parameterName)),1)]),s("td",null,n(a.resultValue),1),s("td",null,n(a.unit),1),s("td",null,n(a.rangeLow),1),s("td",null,n(a.rangeHigh),1)],2))),128))])])}const R=_(b,[["render",F],["__scopeId","data-v-132c1c31"]]),z={components:{TestList:v,TestItem:R,Conversation:S},data(){return{tests:[],messages:[],test:{},loading:!0,keyToggle:0}},methods:{getTests(){m.getTests(this.$route.params.id,this.$store.state.token).then(t=>{this.tests=t.data;let o=this.tests.map(e=>m.getResults(e.id,this.$route.params.id,this.$store.state.token).then(r=>{e.results=r.data}).catch(r=>{console.log(r)}));Promise.all(o).then(()=>{this.test=this.tests.find(e=>e.id==this.$route.params.testId),this.loading=!1})}).catch(t=>{console.log(t)})}},created(){this.getTests()},watch:{$route(t,o){t.params.id===o.params.id?(this.test=this.tests.find(e=>e.id==t.params.testId),this.keyToggle++):m.getTests(t.params.id,this.$store.state.token).then(e=>{console.log(e.data),this.tests=e.data,console.log(t.params.id,this.tests[0].id),this.$router.push({name:"tests",params:{id:t.params.id,testId:this.tests[0].id}})}).catch(e=>{console.log(e)})}}};function E(t,o,e,r,i,c){const a=u("TestList"),T=u("TestItem"),f=u("Conversation");return l(),d("div",{class:g({loading:i.loading,"test-view":!0})},[s("nav",null,[h(a,{tests:i.tests,shrink:!0,"active-test":i.test},null,8,["tests","active-test"])]),(l(),d("main",{key:i.keyToggle},[h(T,{test:i.test,class:"test-item"},null,8,["test"]),h(f,{test:!0,class:"conversation"})]))],2)}const A=_(z,[["render",E],["__scopeId","data-v-19e6aa5a"]]);export{A as default};
